# PluginUpdates
Public repo to announce and host releases for Maya-Plugin and Cinema4D-Plugin.

Releases are generated by executing the `bundle.py` (or `release.bat`) inside the main repo:
- Cinema4D: https://github.com/UNOMi-Solutions/Cinema4D-Plugin/
- Maya: https://github.com/UNOMi-Solutions/Maya-Plugin/

Meanwhile the action in this repo, once triggered, will generate an installer for the plugin and upload it to a specific release in this repo.

## Certifications

### Windows
Windows certs are obtained from DigiCert, there are two important websites:

- https://www.digicert.com/
- https://one.digicert.com/

The certificates only have 1 year of validity, so we need to request a new one every year.

To avoid getting confused:

- Token: A hardware device handling the authentication, we use ones from DigiCert.
- Private Key: A secret required for every certificate. If we use their token, it's stored in KeyLocker.
- KeyLocker: Storing the private keys, (DigiCert One)[https://one.digicert.com/] handles this.
- Client Auth Certificate: The actual one to sign the plugin, it's generated by DigiCert One Wizard later.

Access to the main DigiCert is limited to just Obi, but the DigiCert One is accessible by me and Lekha too.

1. You need OTP from the Authenticator app (usually Google Authenticator) to log in.
2. If it's the first time you're logging in using Obi's account, add your email as manager.
3. Inside KeyLocker, you can find the certificates, assign them to a signer.
4. Now, follow the Wizard, it'll guide you to generate all the info about the `Cleint Auth Certificate`:
    - API token: To give access to DigiCert API.
    - Cert: a `.p12` file locked with password.
    - Password: For the `.p12` file.
    - Ignore rest of the steps (unless you want to learn to do it manually, without command).
5. Go to Certificates in sidebar.
6. Click one of them, make sure to assign a signer, remember the email.
7. Go down, and find "fingerprints", this is the SHA-1 fingerprint for the `Code Signing` certificate.
8. Basically we will use all the client info on #4 to grab and attach code signing certificate in #7 to the installer.

### macOS
Apps in macOS requries these steps: sign & notarize.

- Signing requires the relevant certs installed on the system. In GitHub action, this is obtained through their API, requiring cert installer with its password.

- Notarization process can be done using the notarytool. More information is [Xcode Docs](https://keith.github.io/xcode-man-pages/notarytool.1.html#AUTHENTICATION_OPTIONS). In short, our process uses App Store Connect API Keys:

    > Developer ID team administrators can create App Store Connect API keys for the developers on their team by logging into https://appstoreconnect.apple.com/access/api and selecting the "Keys" tab. For security purposes, the private key can only be downloaded once.

At the time of writing, no Apple-related certs or secrets need to be routinely changed. Owner only needed to check:

- [Apple Developer](https://developer.apple.com/support/renewal/) status to ensure their membership is still up-to-date.
- [App Store Connect](https://appstoreconnect.apple.com/) account to ensure they have accepted to any new agreements (it pops-up on homescreen).
    
## Conventions:

Releases for different types of plugins are named with the following prefixes:
- Cinema4D-Plugin - Windows: `c4d-ls.win32.latest`
- Cinema4D-Plugin - macOS: `c4d-ls.darwin.latest`
They are replaced with every new release.

Other versions are available here, where `plaform` is either `win32` or `darwin`
- Cinema4D-Plugin - LipSync: `c4d-ls.platform.vX.Y.Z`
- Cinema4D-Plugin - MoCap: `c4d-mc.platform.vX.Y.Z`
- Maya-Plugin - LipSync: `maya-ls.platform.vX.Y.Z`
- Maya-Plugin - MoCap: `maya-mc.platform.vX.Y.Z`
